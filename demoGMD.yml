---
- name: Create a file and write content to it
  hosts: all
  become: yes
  tasks:
    - name: Ensure the file exists
      file:
        path: /tmp/info_gmd.txt
        state: touch
        mode: '0644'

    - name: Write content to the file (overwrite)
      copy:
        content: |
          Grand Moulin de Dakar - Serveur configuré automatiquement
          Date de configuration : {{ ansible_date_time.date }}
          Hôte : {{ inventory_hostname }}
        dest: /tmp/info_gmd.txt
        owner: base
        group: base
        mode: '0644'
